# Cписки

Список = Массив

**Структура данных (data structure) — программная единица, позволяющая хранить и обрабатывать множество однотипных и/или логически связанных данных.**

## Создание списка

Чтобы создать список, нужно перечислить его элементы через запятую в квадратных скобках:

```py
languages = ['Python', 'C#', 'C++', 'Java']

languages[0] == 'Python'
languages[1] == 'C#'
languages[2] == 'C++'
languages[3] == 'Java

# Список может содержать значения разных типов данных:
info = ['Timur', 1992, 61.5]
```

Значения, заключенные в квадратные скобки и отделенные запятыми, называются элементами списка.

---

## Пустой список

Создать пустой список можно двумя способами:

- Использовать пустые квадратные скобки `[]`;
- Использовать встроенную функцию, которая называется `list`

```py
mylist = []       # пустой список
mylist = list()   # пустой список
```

---

## Встроенная функция list

Python имеет встроенную функцию `list()`, которая помимо создания пустого списка может преобразовывать некоторые типы объектов в списки.

Функция `range()` создает последовательность целых чисел в заданном диапазоне. Для преобразования этой последовательности в список, мы пишем следующий код:

```py
numbers = list(range(5)) # [0, 1, 2, 3, 4]

even_numbers = list(range(0, 10, 2))  # четные числа [0, 2, 4, 6, 8]
odd_numbers = list(range(1, 10, 2))   # нечетные числа [1, 3, 5, 7, 9]
```

Для преобразования строки:

```py
s = 'abcde'
chars = list(s)  # ['a', 'b', 'c', 'd', 'e']
```

---

## Функция len()

Длиной списка называется количество его элементов.
Чтобы посчитать длину списка используется встроенная функция `len()` (от слова length – длина).

```py
numbers = [2, 4, 6, 8, 10]
languages = ['Python', 'C#', 'C++', 'Java']

print(len(numbers))      # 5
print(len(languages))    # 4
```

---

## Оператор принадлежности in

Оператор in позволяет проверить, содержит ли список некоторый элемент.

```py
numbers = [2, 4, 6, 8, 10]

if 2 in numbers:
    print('Список numbers содержит число 2')
else:
    print('Список numbers не содержит число 2')

# Мы можем использовать оператор in вместе с логическим оператором not

numbers = [2, 4, 6, 8, 10]

if 0 not in numbers:
    print('Список numbers не содержит нулей')
```

---

## Индексация

Для индексации списков в Python используются квадратные скобки [], в которых указывается индекс (номер) нужного элемента в списке:

```py
numbers = [2, 4, 6, 8, 10]

numbers[0] # 2
numbers[1] # 4
...
numbers[4] # 10

# Для нумерации с конца разрешены отрицательные индексы:
numbers[-1] # 10
numbers[-2] # 8
...
numbers[-5] # 2
```

**Попытка обратиться к элементу списка по несуществующему индексу вызовет ошибку**

```py
IndexError: index out of range
```

---

## Срезы

С помощью среза мы можем получить несколько элементов списка, создав диапазон индексов разделенных двоеточием `[x:y]`.

```py
numbers = [2, 4, 6, 8, 10]

print(numbers[1:3]) # [4, 6]
print(numbers[2:5]) # [6, 8, 10]
```

При построении среза `numbers[x:y]` первое число – это то место, где начинается срез (включительно), а второе – это место, где заканчивается срез (невключительно). Разрезая списки, мы создаем новые списки, по сути, подсписки исходного.

- мы можем опускать второй параметр в срезе `numbers[x:]` (но поставить двоеточие), тогда срез берется до конца списка.
- если опустить первый параметр `numbers[:y]`, то можно взять срез от начала списка.
- срез `numbers[:]` возвращает копию исходного списка.

## Использование срезов для изменения элементов в заданном диапазоне

Для изменения целого диапазона элементов списка можно использовать срезы. Например, если мы хотим перевести на русский язык названия фруктов 'banana', 'cherry', 'kiwi', то это можно сделать с помощью среза.

```py
fruits = ['apple', 'apricot', 'banana', 'cherry', 'kiwi', 'lemon', 'mango']
fruits[3:5] = ['банан', 'вишня', 'киви']

print(fruits) # ['apple', 'apricot', 'banana', 'банан', 'вишня', 'киви', 'lemon', 'mango']
```

---

## Операция конкатенации + и умножения на число *

Мы можем применять операторы + и * для списков подобно тому как мы это делали со строками.

```py
print([1, 2, 3, 4] + [5, 6, 7, 8]) # [1, 2, 3, 4, 5, 6, 7, 8]
print([7, 8] * 3)                  # [7, 8, 7, 8, 7, 8]
print([0] * 10)                    # [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
```

Мы также можем использовать расширенные операторы += и *= при работе со списками.

```py
a = [1, 2, 3, 4]
b = [7, 8]
a += b   # добавляем к списку a список b
b *= 5   # повторяем список b 5 раз 

print(a) # [1, 2, 3, 4, 7, 8]
print(b) # [7, 8, 7, 8, 7, 8, 7, 8, 7, 8] 
```

## Встроенные функции sum(), min(), max()

Встроенная функция `sum()` принимает в качестве параметра список чисел и вычисляет сумму его элементов.

```py
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print('Сумма всех элементов списка =', sum(numbers)) # Сумма всех элементов списка = 55
```

Встроенные функции `min()` и `max()` принимают в качестве параметра список и находят минимальный и максимальный элементы соответственно.

```py
numbers = [3, 4, 10, 3333, 12, -7, -5, 4]
print('Минимальный элемент =', min(numbers)) # Минимальный элемент = -7
print('Максимальный элемент =', max(numbers)) # Максимальный элемент = 3333
```

## Отличие списков от строк

Несмотря на всю схожесть списков и строк, есть одно очень важное отличие: строки — неизменяемые объекты, а списки – изменяемые.

```py
s = 'abcdefg'
s[1] = 'x'    # пытаемся изменить 2 символ (по индексу 1) строки 

# приводит к ошибке
# object does not support item assignment
```

```py
numbers = [1, 2, 3, 4, 5, 6, 7]
numbers[1] = 101     # изменяем 2 элемент (по индексу 1) списка
print(numbers)       # [1, 101, 3, 4, 5, 6, 7]
```

## Метод append()

Для добавления нового элемента в конец списка используется метод `append()`.

```py
numbers = [1, 1, 2, 3, 5, 8, 13]  # создаем список

numbers.append(21)  # добавляем число 21 в конец списка
numbers.append(34)  # добавляем число 34 в конец списка

print(numbers) # [1, 1, 2, 3, 5, 8, 13, 21, 34]
```

**Важно: мы не можем использовать индексаторы для установки значений элементов списка, если список пустой.**

## Метод extend()

Метод `extend()` как бы расширяет один список, добавляя к нему элементы другого списка.

```py
numbers = [0, 2, 4, 6, 8, 10]
odds = [1, 3, 5, 7]

numbers.extend(odds)
print(numbers) # [0, 2, 4, 6, 8, 10, 1, 3, 5, 7]
```

**Отличие между методами `append()` и `extend()` проявляется при добавлении строки к списку.**

```py
words1 = ['iq option', 'stepik', 'beegeek']
words2 = ['iq option', 'stepik', 'beegeek']

words1.append('python')
words2.extend('python')

print(words1) # ['iq option', 'stepik', 'beegeek', 'python']
print(words2) # ['iq option', 'stepik', 'beegeek', 'p', 'y', 't', 'h', 'o', 'n']

```

Метод `append()` добавляет строку 'python' целиком к списку, а метод `extend()` разбивает строку 'python' на  символы 'p', 'y', 't', 'h', 'o', 'n' и их добавляет в качестве элементов списка.

## Удаление элементов

С помощью оператора `del` можно удалять элементы списка по определенному индексу.

```py
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]
del numbers[5]    # удаляем элемент имеющий индекс 5

print(numbers) # [1, 2, 3, 4, 5, 7, 8, 9]
```

Оператор `del` работает и со срезами: мы можем удалить целый диапазон элементов списка.

```py
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]
del numbers[2:7]    # удаляем элементы с 2 по 6 включительно

print(numbers) # [1, 2, 8, 9]
```

Мы можем удалить все элементы на четных позициях (0, 2, 4, ...) исходного списка.

```py
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]
del numbers[::2]

print(numbers) # [2, 4, 6, 8]
```

## Вывод списка

Для вывода всего списка можно применить функцию `print()`:

```py
numbers = [2, 4, 6, 8, 10]
languages = ['Python', 'C#', 'C++', 'Java']
print(numbers)   # [2, 4, 6, 8, 10]
print(languages) # ['Python', 'C#', 'C++', 'Java']
```

---

## Вывод с помощью цикла for

Вариант 1. Если нужны индексы элементов:

```py
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

for i in range(len(numbers)):
    print(numbers[i])
```

Вариант 2. Если индексы не нужны:

```py
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

for num in numbers:
    print(num)
```

---

## Вывод с помощью распаковки списка

Вариант 1. Вывод элементов списка через один символ пробела:

```py
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

print(*numbers) # 0 1 2 3 4 5 6 7 8 9 10
```

Вариант 2. Вывод элементов списка, каждого на отдельной строке

```py
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

print(*numbers, sep='\n')
```

## Метод split()

Метод `split()` разбивает строку на слова, используя в качестве разделителя последовательность пробельных символов.

```py
s = 'Python is the most powerful language'
words = s.split()
print(words) # ['Python', 'is', 'the', 'most', 'powerful', 'language']
```

У метода `split()` есть необязательный параметр, который определяет, какой набор символов будет использоваться в качестве разделителя между элементами списка. Например, вызов метода `split('.')` вернет список, полученный разделением исходной строки по символу '.'

```py
ip = '192.168.1.24'
numbers = ip.split('.') # указываем явно разделитель
print(numbers)          # ['192', '168', '1', '24']
```

---

## Метод join()

Метод `join()` собирает строку из элементов списка, используя в качестве разделителя строку, к которой применяется метод.

```py
words = ['Python', 'is', 'the', 'most', 'powerful', 'language']
s = ' '.join(words)
print(s)  # Python is the most powerful language

# еще примеры:

words = ['Мы', 'учим', 'язык', 'Python']
print('*'.join(words)) # Мы*учим*язык*Python
print('-'.join(words)) # Мы-учим-язык-Python
print('?'.join(words)) # Мы?учим?язык?Python
print('!'.join(words)) # Мы!учим!язык!Python
print('*****'.join(words)) # Мы*****учим*****язык*****Python
print('abc'.join(words)) # МыabcучимabcязыкabcPython
print('123'.join(words)) # Мы123учим123язык123Python
```

!!! **Метод `join()` работает только со списком строк.**
 Следующий код приводит к ошибке:

```py
numbers = [1, 2, 3, 4]  # список чисел
s = '*'.join(numbers)
print(s) # TypeError: sequence item 0: expected str instance, int found
```

---

## Метод insert()

Метод `insert()` позволяет вставлять значение в список в заданной позиции. В него передается два аргумента:

- `index`: индекс, задающий место вставки значения;
- `value`: значение, которое требуется вставить.  

Когда значение вставляется в список, список расширяется в размере, чтобы разместить новое значение. Значение, которое ранее находилось в заданной индексной позиции, и все элементы после него сдвигаются на одну позицию к концу списка.

```py
names = ['Gvido', 'Roman' , 'Timur']
print(names) # ['Gvido', 'Roman' , 'Timur'] 

names.insert(0, 'Anders')
print(names) # ['Anders', 'Gvido', 'Roman' , 'Timur']

names.insert(3, 'Josef')
print(names) # ['Anders', 'Gvido', 'Roman' , 'Josef', 'Timur']
```

Если указан недопустимый индекс, то во время выполнения программы не происходит ошибки. Если задан индекс за пределами конца списка, то значение будет добавлено в конец списка.
Если применен отрицательный индекс, который указывает на недопустимую позицию, то значение будет вставлено в начало списка.

---

## Метод index()

Метод `index()` возвращает индекс первого элемента, значение которого равняется переданному в метод значению. Таким образом, в метод передается один параметр:

- `value`: значение, индекс которого требуется найти.

**!!! Если элемент в списке не найден, то во время выполнения происходит ошибка.**

```py
names = ['Gvido', 'Roman' , 'Timur']
position = names.index('Timur')
print(position) # 2

names = ['Gvido', 'Roman' , 'Timur']
position = names.index('Anders')
print(position) # ValueError: 'Anders' is not in list
```

Чтобы избежать таких ошибок, можно использовать метод `index()` вместе с оператором принадлежности `in`:

```py
names = ['Gvido', 'Roman' , 'Timur']
if 'Anders' in names:
    position = names.index('Anders')
    print(position)
else:
    print('Такого значения нет в списке')
```

## Метод remove()

Метод `remove()` удаляет первый элемент, значение которого равняется переданному в метод значению. В метод передается один параметр:

- `value`: значение, которое требуется удалить.

Метод уменьшает размер списка на один элемент. Все элементы после удаленного элемента смещаются на одну позицию к началу списка. Если элемент в списке не найден, то во время выполнения происходит ошибка.

```py
food = ['Рис', 'Курица', 'Рыба', 'Брокколи', 'Рис']
print(food) # ['Рис', 'Курица', 'Рыба', 'Брокколи', 'Рис']

food.remove('Рис')
print(food) # ['Курица', 'Рыба', 'Брокколи', 'Рис']
```

**Важно:** метод `remove()` удаляет только первый элемент с указанным значением. Все последующие его вхождения остаются в списке. Чтобы удалить все вхождения нужно использовать цикл `while` в связке с оператором принадлежности `in` и методом remove.

## Метод pop()

Метод `pop()` удаляет элемент по указанному индексу и возвращает его. В метод `pop()` передается один **необязательный** аргумент:

- `index`: индекс элемента, который требуется удалить.

Если индекс не указан, то метод удаляет и возвращает последний элемент списка.
Если список пуст или указан индекс за пределами диапазона, то во время выполнения происходит ошибка.

```py
names = ['Gvido', 'Roman' , 'Timur']
item = names.pop(1)
print(item)  # Roman 
print(names) # ['Gvido', 'Timur']
```

## Метод count()

Метод `count()` возвращает количество элементов в списке, значения которых равны переданному в метод значению.
Таким образом, в метод передается один параметр:

- `value`: значение, количество элементов, равных которому,  нужно посчитать.

Если значение в списке не найдено, то метод возвращает 0.

```py
names = ['Timur', 'Gvido', 'Roman', 'Timur', 'Anders', 'Timur']
cnt1 = names.count('Timur')
cnt2 = names.count('Gvido')
cnt3 = names.count('Josef')

print(cnt1) # 3
print(cnt2) # 1
print(cnt3) # 0
```

## Метод reverse()

Метод `reverse()` инвертирует порядок следования значений в списке, то есть меняет его на противоположный.

```py
names = ['Gvido', 'Roman' , 'Timur']
names.reverse()
print(names) # ['Timur', 'Roman', 'Gvido']
```

**!!! Существует большая разница между вызовом метода `names.reverse()` и использованием среза `names[::-1]`. Метод `reverse()` меняет порядок элементов на обратный в текущем списке, а срез создает копию списка, в котором элементы следуют в обратном порядке.**

## Метод clear()

Метод `clear()` удаляет все элементы из списка.

```py
names = ['Gvido', 'Roman' , 'Timur']
names.clear()
print(names) # []
```

## Метод copy()

Метод `copy()` создает поверхностную копию списка.

```py
names = ['Gvido', 'Roman' , 'Timur']
names_copy = names.copy()  # создаем поверхностную копию списка names

print(names)      # ['Gvido', 'Roman', 'Timur']
print(names_copy) # ['Gvido', 'Roman', 'Timur']
```

Аналогичного результата можно достичь с помощью срезов или функции `list()`:

```py
names = ['Gvido', 'Roman' , 'Timur']
names_copy1 = list(names)             # создаем поверхностную копию с помощью функции list()
names_copy2 = names[:]                # создаем поверхностную копию с помощью среза от начала до конца
```

## Метод sort()

В Python списки имеют встроенный метод `sort()`, который сортирует элементы списка по возрастанию или убыванию.

```py
a = [1, 7, -3, 9, 0, -67, 34, 12, 45, 1000, 6,  8, -2, 99]
a.sort()
print('Отсортированный список:', a)
# Отсортированный список: [-67, -3, -2, 0, 1, 6, 7, 8, 9, 12, 34, 45, 99, 1000]
```

Если требуется отсортировать список по убыванию, необходимо явно указать параметр `reverse = True`.

```py
a = [1, 7, -3, 9, 0, -67, 34, 12, 45, 1000, 6,  8, -2, 99]
a.sort(reverse = True)   # сортируем по убыванию
print('Отсортированный список:', a)
# Отсортированный список: [1000, 99, 45, 34, 12, 9, 8, 7, 6, 1, 0, -2, -3, -67]
```

С помощью метода `sort()` можно сортировать списки содержащие не только числа, но и строки. В таком случае элементы списка сортируются в соответствии с лексикографическим порядком.

```py
a = ['бета', 'альфа', 'дельта', 'гамма']
a.sort()
print ('Отсортированный список:', a)
# Отсортированный список: ['альфа', 'бета', 'гамма', 'дельта']
```

## Списочные выражения

В Python есть механизм для создания списков из неповторяющихся элементов. Такой механизм называется — списочное выражение (list comprehension).

Общий вид списочного выражения следующий:

    `[выражение for переменная in последовательность]`

- `переменная` — имя некоторой переменной,
- `последовательность` — последовательность значений, которые она принимает (список, строка или объект, полученный при помощи функции `range`),
- `выражение` — некоторое выражение, как правило, зависящее от использованной в списочном выражении переменной, которым будут заполнены элементы списка.

```py
# 1. Создать список, заполненный 10 нулями можно и при помощи списочного выражения:
zeros = [0 for i in range(10)]

# 2. Создать список, заполненный квадратами целых чисел от 0 до 9 можно так:
squares = [i ** 2 for i in range(10)]

# 3. Создать список, заполненный кубами целых чисел от 10 до 20 можно так:
cubes = [i ** 3 for i in range(10, 21)]

# 4. Создать список, заполненный символами строки:
chars = [c for c in 'abcdefg']
print(chars)

# 5. Если сначала вводится число n – количество строк, а затем сами строки, то создать список можно так:
lines = [input() for _ in range(int(input()))]

# 6. Если требуется считать список чисел, то необходимо добавить преобразование типов:
lines = [input() for _ in range(int(input()))]
```

## Условия в списочном выражении

В списочных выражениях можно использовать условный оператор.

```py
# Требуется создать список четных чисел от 0 до 20
evens = [i for i in range(21) if i % 2 == 0]

# правильнее так
evens = [i for i in range(0, 21, 2)]
```

## Вложенные циклы

В списочном выражении можно использовать вложенные циклы.

```py
numbers = [i * j for i in range(1, 5) for j in range(2)]
print(numbers) # [0, 1, 0, 2, 0, 3, 0, 4]

# тоже самое что и
numbers = []

for i in range(1, 5):
    for j in range(2):
        numbers.append(i * j)
print(numbers)
```

## all()

Встроенная функция `all(iterable)` возвращает `True`, только если все элементы последовательности  истинные (или, если последовательность пуста).  
Если хотя бы один элемент последовательности  ложный функция вернёт `False`.

## any()

Встроенная функция `any(iterable)`, которая возвращает `True`, если хотя бы какой-нибудь элемент последовательности возвращает истину.  
Если итерируемый объект пуст, возвращается `False`.
